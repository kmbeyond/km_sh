

temp_role=$(
 aws sts assume-role --role-arn "arn:aws:iam::1234:role/km_bkt_role" --role-session-name "km-session-001" --profile "srv-cdp-bda-external-dev"
)
#=> with -- => An error occurred (ValidationError) when calling the AssumeRole operation: The requested DurationSeconds exceeds the MaxSessionDuration set for this role.

echo $temp_role

export AWS_ACCESS_KEY_ID=$(echo $temp_role | python2 -c "import sys, json; print json.load(sys.stdin)['Credentials']['AccessKeyId']")
export AWS_SECRET_ACCESS_KEY=$(echo $temp_role | python2 -c "import sys, json; print json.load(sys.stdin)['Credentials']['SecretAccessKey']")
export AWS_SESSION_TOKEN=$(echo $temp_role | python2 -c "import sys, json; print json.load(sys.stdin)['Credentials']['SessionToken']")
